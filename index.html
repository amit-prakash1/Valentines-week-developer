<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Week - Developer Dashboard</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --rose-pink: #FF6B9D;
            --deep-rose: #C23866;
            --warm-gold: #D4AF37;
            --dev-dark: #1a1a2e;
            --dev-blue: #16213e;
            --dev-accent: #0f3460;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Poppins', sans-serif; background: var(--dev-dark); color: white; overflow-x: hidden; }
        .dev-container { display: grid; grid-template-columns: 1fr 1fr; gap: 0; min-height: 100vh; }
        .dev-panel { overflow-y: auto; padding: 30px; max-height: 100vh; }
        .dev-editor { background: var(--dev-blue); border-right: 1px solid var(--dev-accent); }
        .dev-messages { background: var(--dev-dark); }
        .dev-header { margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid var(--dev-accent); }
        .dev-header h2 { font-family: 'Playfair Display', serif; font-size: 2rem; color: var(--warm-gold); margin-bottom: 5px; }
        .dev-header p { color: #999; font-size: 0.9rem; }
        .status-indicator { display: inline-block; width: 10px; height: 10px; background: #4CAF50; border-radius: 50%; margin-left: 10px; animation: pulse-dot 2s infinite; }
        .status-indicator.disconnected { background: #f44336; animation: none; }
        @keyframes pulse-dot { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .section-header { font-family: 'Playfair Display', serif; font-size: 1.3rem; color: var(--rose-pink); margin: 30px 0 15px 0; padding-bottom: 10px; border-bottom: 1px solid var(--dev-accent); }
        .current-day-selector { background: var(--dev-accent); padding: 20px; border-radius: 15px; margin-bottom: 30px; }
        .current-day-selector label { display: block; margin-bottom: 12px; color: var(--warm-gold); font-weight: 600; font-size: 1rem; }
        .day-select-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .day-select-btn { padding: 12px 8px; background: #1e3a5f; border: 2px solid transparent; border-radius: 10px; color: white; cursor: pointer; transition: all 0.3s ease; font-size: 0.75rem; text-align: center; }
        .day-select-btn:hover { background: #2a4a6f; }
        .day-select-btn.active { background: linear-gradient(135deg, var(--deep-rose), var(--rose-pink)); border-color: var(--warm-gold); transform: scale(1.05); font-weight: 600; }
        .day-editor-selector { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-bottom: 30px; }
        .day-btn { padding: 15px; background: var(--dev-accent); border: 2px solid transparent; border-radius: 12px; color: white; cursor: pointer; transition: all 0.3s ease; font-size: 0.85rem; text-align: center; }
        .day-btn:hover { background: #1e3a5f; }
        .day-btn.active { background: linear-gradient(135deg, var(--deep-rose), var(--rose-pink)); border-color: var(--warm-gold); transform: scale(1.05); }
        .form-group { margin-bottom: 25px; }
        .form-group label { display: block; margin-bottom: 10px; color: var(--warm-gold); font-weight: 500; font-size: 0.95rem; }
        .form-group input, .form-group textarea { width: 100%; padding: 15px; background: var(--dev-accent); border: 2px solid #2a4a6f; border-radius: 10px; color: white; font-family: 'Poppins', sans-serif; font-size: 0.95rem; transition: all 0.3s ease; }
        .form-group input:focus, .form-group textarea:focus { outline: none; border-color: var(--rose-pink); background: #1e3a5f; }
        .form-group textarea { min-height: 150px; resize: vertical; }
        .photo-upload-area { margin-bottom: 25px; }
        .upload-zone { border: 2px dashed var(--dev-accent); border-radius: 15px; padding: 30px; text-align: center; cursor: pointer; transition: all 0.3s ease; background: rgba(255, 255, 255, 0.03); }
        .upload-zone:hover { border-color: var(--rose-pink); background: rgba(255, 255, 255, 0.05); }
        .upload-zone input { display: none; }
        .uploaded-photos-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 20px; }
        .uploaded-photo-item { position: relative; aspect-ratio: 3/4; border-radius: 10px; overflow: hidden; background: var(--dev-accent); }
        .uploaded-photo-item img { width: 100%; height: 100%; object-fit: cover; }
        .delete-photo-btn { position: absolute; top: 8px; right: 8px; width: 30px; height: 30px; background: rgba(220, 20, 60, 0.95); border: none; border-radius: 50%; color: white; cursor: pointer; font-size: 0.9rem; transition: all 0.2s ease; }
        .delete-photo-btn:hover { background: #DC143C; transform: scale(1.1); }
        .save-btn { width: 100%; padding: 18px; background: linear-gradient(135deg, var(--rose-pink), var(--warm-gold)); border: none; border-radius: 12px; color: white; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: all 0.3s ease; margin-top: 20px; }
        .save-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(212, 175, 55, 0.4); }
        .messages-container { display: flex; flex-direction: column; height: calc(100vh - 180px); }
        .messages-list { flex: 1; overflow-y: auto; margin-bottom: 20px; }
        .message-item { background: var(--dev-blue); padding: 20px; border-radius: 15px; margin-bottom: 15px; animation: slideInRight 0.4s ease; }
        .message-item.from-client { border-left: 4px solid var(--rose-pink); }
        .message-item.from-developer { border-left: 4px solid var(--warm-gold); }
        @keyframes slideInRight { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
        .message-header { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 0.85rem; color: #999; }
        .message-sender { font-weight: 600; color: var(--warm-gold); }
        .message-content { color: white; line-height: 1.6; font-size: 0.95rem; }
        .no-messages { text-align: center; color: #666; padding: 40px; font-style: italic; }
        .new-badge { display: inline-block; background: var(--rose-pink); color: white; padding: 3px 10px; border-radius: 12px; font-size: 0.75rem; font-weight: 600; margin-left: 10px; }
        .send-to-client { background: var(--dev-blue); padding: 20px; border-radius: 15px; border: 2px solid var(--dev-accent); }
        .send-to-client h3 { color: var(--warm-gold); margin-bottom: 15px; font-size: 1.1rem; }
        .send-to-client textarea { width: 100%; padding: 15px; background: var(--dev-accent); border: 2px solid #2a4a6f; border-radius: 10px; color: white; font-family: 'Poppins', sans-serif; min-height: 100px; margin-bottom: 15px; resize: vertical; }
        .send-to-client textarea:focus { outline: none; border-color: var(--warm-gold); }
        .send-client-btn { width: 100%; padding: 15px; background: linear-gradient(135deg, var(--warm-gold), var(--rose-pink)); border: none; border-radius: 10px; color: white; font-weight: 600; cursor: pointer; transition: all 0.3s ease; }
        .send-client-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(212, 175, 55, 0.4); }
        @media (max-width: 1024px) { .dev-container { grid-template-columns: 1fr; } .dev-editor { border-right: none; border-bottom: 1px solid var(--dev-accent); } }
        @media (max-width: 768px) { .day-editor-selector, .day-select-grid { grid-template-columns: repeat(2, 1fr); } }
    </style>
</head>
<body>
    <div class="dev-container">
        <div class="dev-panel dev-editor">
            <div class="dev-header">
                <h2>Content Editor <span class="status-indicator disconnected" id="statusIndicator"></span></h2>
                <p>Customize everything your love sees</p>
            </div>
            <div class="section-header">ğŸ“„ Page Headers</div>
            <div class="form-group"><label>Main Title</label><input type="text" id="mainTitle" placeholder="Our Love Story"></div>
            <div class="form-group"><label>Subtitle</label><input type="text" id="subtitle" placeholder="VALENTINE'S WEEK 2026"></div>
            <div class="section-header">ğŸ“… Which Day to Display</div>
            <div class="current-day-selector">
                <label>Select which day she should see:</label>
                <div class="day-select-grid" id="currentDaySelector">
                    <button class="day-select-btn active" onclick="setCurrentDay(0)">ğŸŒ¹<br><span style="font-size: 0.7rem;">Rose Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(1)">ğŸ’<br><span style="font-size: 0.7rem;">Propose Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(2)">ğŸ«<br><span style="font-size: 0.7rem;">Chocolate Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(3)">ğŸ§¸<br><span style="font-size: 0.7rem;">Teddy Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(4)">ğŸ¤<br><span style="font-size: 0.7rem;">Promise Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(5)">ğŸ«‚<br><span style="font-size: 0.7rem;">Hug Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(6)">ğŸ˜˜<br><span style="font-size: 0.7rem;">Kiss Day</span></button>
                    <button class="day-select-btn" onclick="setCurrentDay(7)">â¤ï¸<br><span style="font-size: 0.7rem;">Valentine's Day</span></button>
                </div>
            </div>
            <div class="section-header">âœï¸ Edit Day Content</div>
            <p style="color: #999; font-size: 0.85rem; margin-bottom: 20px;">Select which day to edit:</p>
            <div class="day-editor-selector" id="dayEditorSelector">
                <button class="day-btn active" onclick="loadDay(0)">ğŸŒ¹<br>Rose Day</button>
                <button class="day-btn" onclick="loadDay(1)">ğŸ’<br>Propose Day</button>
                <button class="day-btn" onclick="loadDay(2)">ğŸ«<br>Chocolate Day</button>
                <button class="day-btn" onclick="loadDay(3)">ğŸ§¸<br>Teddy Day</button>
                <button class="day-btn" onclick="loadDay(4)">ğŸ¤<br>Promise Day</button>
                <button class="day-btn" onclick="loadDay(5)">ğŸ«‚<br>Hug Day</button>
                <button class="day-btn" onclick="loadDay(6)">ğŸ˜˜<br>Kiss Day</button>
                <button class="day-btn" onclick="loadDay(7)">â¤ï¸<br>Valentine's Day</button>
            </div>
            <div class="form-group"><label>Day Icon (Emoji)</label><input type="text" id="dayIcon" placeholder="ğŸŒ¹"></div>
            <div class="form-group"><label>Day Title</label><input type="text" id="dayTitle" placeholder="Rose Day"></div>
            <div class="form-group"><label>Date</label><input type="text" id="dayDate" placeholder="February 7"></div>
            <div class="form-group"><label>Your Message to Her</label><textarea id="dayMessage" placeholder="Write a heartfelt message..."></textarea></div>
            <div class="photo-upload-area"><label style="color: var(--warm-gold); font-weight: 500; margin-bottom: 10px; display: block;">Photos</label><div class="upload-zone" onclick="document.getElementById('photoInput').click()"><input type="file" id="photoInput" accept="image/*" multiple><p style="color: #999; margin-bottom: 8px;">ğŸ“¸ Click to upload photos</p><p style="color: #666; font-size: 0.85rem;">Add special memories for this day</p></div><div class="uploaded-photos-grid" id="uploadedPhotosGrid"></div></div>
            <button class="save-btn" onclick="saveAll()">ğŸ’¾ Save All Changes</button>
        </div>
        <div class="dev-panel dev-messages">
            <div class="dev-header"><h2>Messages <span id="unreadCount"></span></h2><p>Two-way communication with your love</p></div>
            <div class="messages-container"><div class="messages-list" id="messagesList"><div class="no-messages">No messages yet</div></div><div class="send-to-client"><h3>ğŸ’Œ Send Message to Her</h3><textarea id="devMessageInput" placeholder="Type your message here..."></textarea><button class="send-client-btn" onclick="sendMessage()">Send Message</button></div></div>
        </div>
    </div>
    <script type="module">
        const firebaseConfig = {
            apiKey: "AIzaSyDsfOJdZIxEMa4Gf6wgxi7RAuUnWHItZt0",
            authDomain: "valentine26-560df.firebaseapp.com",
            databaseURL: "https://valentine26-560df-default-rtdb.firebaseio.com",
            projectId: "valentine26-560df",
            storageBucket: "valentine26-560df.firebasestorage.app",
            messagingSenderId: "448143163201",
            appId: "1:448143163201:web:8921f1ebc6f30d6bb0abc0"
        };
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getDatabase, ref, onValue, push, set, update, get } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';
        const valentineDays = [{ id: 0, name: 'Rose Day', date: 'February 7', defaultIcon: 'ğŸŒ¹' },{ id: 1, name: 'Propose Day', date: 'February 8', defaultIcon: 'ğŸ’' },{ id: 2, name: 'Chocolate Day', date: 'February 9', defaultIcon: 'ğŸ«' },{ id: 3, name: 'Teddy Day', date: 'February 10', defaultIcon: 'ğŸ§¸' },{ id: 4, name: 'Promise Day', date: 'February 11', defaultIcon: 'ğŸ¤' },{ id: 5, name: 'Hug Day', date: 'February 12', defaultIcon: 'ğŸ«‚' },{ id: 6, name: 'Kiss Day', date: 'February 13', defaultIcon: 'ğŸ˜˜' },{ id: 7, name: "Valentine's Day", date: 'February 14', defaultIcon: 'â¤ï¸' }];
        let app, database, isConnected = false, currentEditingDay = 0, config = { currentDay: 0, mainTitle: 'Our Love Story', subtitle: "VALENTINE'S WEEK 2026" };
        try { app = initializeApp(firebaseConfig); database = getDatabase(app); isConnected = true; document.getElementById('statusIndicator').classList.remove('disconnected'); initializeData(); } catch (error) { console.error('Firebase error:', error); alert('Firebase connection error: ' + error.message); }
        const KEY = 'MySecretValentineKey2026!@#$%';
        // function encrypt(text) { let e = ''; for (let i = 0; i < text.length; i++) { e += String.fromCharCode(text.charCodeAt(i) ^ KEY.charCodeAt(i % KEY.length)); } return btoa(e); }
        // function decrypt(encrypted) { try { const decoded = atob(encrypted); let d = ''; for (let i = 0; i < decoded.length; i++) { d += String.fromCharCode(decoded.charCodeAt(i) ^ KEY.charCodeAt(i % KEY.length)); } return d; } catch { return encrypted; } }

        function encrypt(text) {
            const encoded = new TextEncoder().encode(text);
            let result = '';
            for (let i = 0; i < encoded.length; i++) {
                result += String.fromCharCode(encoded[i] ^ KEY.charCodeAt(i % KEY.length));
            }
            return btoa(result);
        }
        
        function decrypt(encrypted) {
            try {
                const decoded = atob(encrypted);
                const bytes = new Uint8Array(decoded.length);
        
                for (let i = 0; i < decoded.length; i++) {
                    bytes[i] = decoded.charCodeAt(i) ^ KEY.charCodeAt(i % KEY.length);
                }
        
                return new TextDecoder().decode(bytes);
            } catch {
                return encrypted;
            }
        }
        
        async function initializeData() { const configSnap = await get(ref(database, 'config')); if (!configSnap.exists()) { await set(ref(database, 'config'), config); } else { config = configSnap.val(); } for (const day of valentineDays) { const daySnap = await get(ref(database, 'days/' + day.id)); if (!daySnap.exists()) { await set(ref(database, 'days/' + day.id), { icon: day.defaultIcon, title: day.name, date: day.date, message: `Happy ${day.name}! Write your special message here...`, photos: [] }); } } renderCurrentDaySelector(); renderDayEditorSelector(); loadConfig(); loadDay(0); listenToMessages(); }
        function renderCurrentDaySelector() { document.getElementById('currentDaySelector').innerHTML = valentineDays.map(day => `<button class="day-select-btn ${day.id === config.currentDay ? 'active' : ''}" onclick="setCurrentDay(${day.id})">${day.defaultIcon}<br><span style="font-size: 0.7rem;">${day.name}</span></button>`).join(''); }
        function renderDayEditorSelector() { document.getElementById('dayEditorSelector').innerHTML = valentineDays.map(day => `<button class="day-btn ${day.id === currentEditingDay ? 'active' : ''}" onclick="loadDay(${day.id})">${day.defaultIcon}<br>${day.name}</button>`).join(''); }
        window.setCurrentDay = function(dayId) { config.currentDay = dayId; update(ref(database, 'config'), { currentDay: dayId }); renderCurrentDaySelector(); };
        function loadConfig() { onValue(ref(database, 'config'), (snapshot) => { config = snapshot.val() || config; document.getElementById('mainTitle').value = config.mainTitle; document.getElementById('subtitle').value = config.subtitle; renderCurrentDaySelector(); }); }
        window.loadDay = async function(dayId) { currentEditingDay = dayId; const snapshot = await get(ref(database, 'days/' + dayId)); const day = snapshot.val() || {}; document.getElementById('dayIcon').value = day.icon || ''; document.getElementById('dayTitle').value = day.title || ''; document.getElementById('dayDate').value = day.date || ''; document.getElementById('dayMessage').value = day.message || ''; renderPhotos(day.photos || []); renderDayEditorSelector(); };
        function renderPhotos(photos) { const grid = document.getElementById('uploadedPhotosGrid'); if (photos.length === 0) { grid.innerHTML = ''; return; } grid.innerHTML = photos.map((photo, index) => `<div class="uploaded-photo-item"><img src="${photo}" alt="Photo ${index + 1}"><button class="delete-photo-btn" onclick="deletePhoto(${index})">âœ•</button></div>`).join(''); }
        document.getElementById('photoInput').addEventListener('change', async function(e) { const files = e.target.files; if (files.length === 0) return; const snapshot = await get(ref(database, 'days/' + currentEditingDay + '/photos')); let photos = snapshot.val() || []; for (const file of files) { const reader = new FileReader(); reader.onload = async function(event) { photos.push(event.target.result); await set(ref(database, 'days/' + currentEditingDay + '/photos'), photos); renderPhotos(photos); }; reader.readAsDataURL(file); } e.target.value = ''; });
        window.deletePhoto = async function(index) { if (!confirm('Delete this photo?')) return; const snapshot = await get(ref(database, 'days/' + currentEditingDay + '/photos')); let photos = snapshot.val() || []; photos.splice(index, 1); await set(ref(database, 'days/' + currentEditingDay + '/photos'), photos); renderPhotos(photos); };
        window.saveAll = async function() { await update(ref(database, 'config'), { mainTitle: document.getElementById('mainTitle').value, subtitle: document.getElementById('subtitle').value }); const snapshot = await get(ref(database, 'days/' + currentEditingDay)); const existingDay = snapshot.val() || {}; await update(ref(database, 'days/' + currentEditingDay), { icon: document.getElementById('dayIcon').value || 'â¤ï¸', title: document.getElementById('dayTitle').value, date: document.getElementById('dayDate').value, message: document.getElementById('dayMessage').value, photos: existingDay.photos || [] }); alert('Saved successfully! âœ…'); };
        function listenToMessages() { onValue(ref(database, 'messages'), (snapshot) => { const messages = []; snapshot.forEach((child) => { messages.push({ key: child.key, ...child.val() }); }); renderMessages(messages); }); }
        function renderMessages(messages) { const container = document.getElementById('messagesList'); const unreadCount = messages.filter(m => m.from === 'client' && !m.read).length; document.getElementById('unreadCount').innerHTML = unreadCount > 0 ? `<span class="new-badge">${unreadCount} New</span>` : ''; if (messages.length === 0) { container.innerHTML = '<div class="no-messages">No messages yet</div>'; return; } container.innerHTML = messages.map(msg => { const text = msg.encrypted ? decrypt(msg.text) : msg.text; const isClient = msg.from === 'client'; const sender = isClient ? 'ğŸ’• From Her' : 'ğŸ’Œ You'; return `<div class="message-item ${isClient ? 'from-client' : 'from-developer'}"><div class="message-header"><span class="message-sender">${sender}</span><span>${msg.timestamp}</span></div><div class="message-content">${text}</div></div>`; }).join(''); setTimeout(() => { container.scrollTop = container.scrollHeight; }, 100); messages.forEach(msg => { if (msg.from === 'client' && !msg.read) { update(ref(database, 'messages/' + msg.key), { read: true }); } }); }
        window.sendMessage = function() { const input = document.getElementById('devMessageInput'); const text = input.value.trim(); if (!text) return; push(ref(database, 'messages'), { from: 'developer', text: encrypt(text), encrypted: true, timestamp: new Date().toLocaleString(), read: false, readByClient: false }); input.value = ''; };
        document.getElementById('devMessageInput').addEventListener('keypress', (e) => { if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); sendMessage(); } });
    </script>
</body>
</html>
